<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>포트폴리오 게시하기</title>
  <link rel="stylesheet" href="/css/showresume.css">
</head>
<body>

<div class="resume-wrapper">
  <!-- ✅ 포트폴리오 게시 미리보기 모달 -->
  <div id="portfolioModal" class="modal">
    <div class="modal-content resume-wrapper">
      <h1 th:text="${resume != null ? resume.title + ' 이력서' : '이력서'}">이력서</h1>

      <!-- 프로필 정보 -->
      <section class="resume-section">
        <h2>내 정보</h2>
        <div class="profile-box">
          <img id="profileImage" class="profile-img" th:src="@{'/uploads/' + ${resume.profileImageUrl}}" alt="프로필 사진">
          <div class="info-text">
            <p><strong id="userName">이름</strong></p>
            <p class="skill" id="mainLanguage">기술스택</p>
            <p><strong>성별:</strong> <span id="sex">-</span></p>
            <p><strong>생년월일:</strong> <span id="birthday">-</span></p>
            <p><strong>연락처:</strong> <span id="phone">-</span></p>
            <p><strong>이메일:</strong> <span id="email">-</span></p>
            <p><strong>지역:</strong> <span id="region">-</span></p>
          </div>
        </div>
      </section>

      <!-- 각 섹션 반복 -->
      <div th:each="section : ${resume.sections}" class="resume-section">
        <h2 th:text="${section.title}">섹션 제목</h2>

        <!-- dragItems가 있는 경우 -->
        <ul th:if="${not #lists.isEmpty(section.dragItems)}">
          <li th:each="item : ${section.dragItems}" th:text="${item.displayText}">드래그 항목</li>
        </ul>

        <!-- content만 있는 경우 -->
        <div th:if="${#lists.isEmpty(section.dragItems) and section.content != null and section.content != ''}">
          <textarea th:if="${section.title == '자기소개'}" readonly th:text="${section.content}">자기소개</textarea>
          <p th:if="${section.title != '자기소개'}" th:text="${section.content}"></p>
        </div>

        <!-- 선택형 태그 -->
        <ul th:if="${section.selectedTags != null and #lists.size(section.selectedTags) > 0}">
          <li th:each="tag : ${section.selectedTags}" th:text="${tag}"></li>
        </ul>


        <!-- 학력사항 -->
        <div th:if="${section.educations != null and #lists.size(section.educations) > 0}">
          <div th:each="edu : ${section.educations}">
            <span th:text="|${edu.startYear}.${edu.startMonth} ~ ${edu.endYear}.${edu.endMonth} ${edu.schoolName} ${edu.majorName} ${edu.status}|"></span><br>
          </div>
        </div>

        <!-- 사진 첨부 -->
        <div th:if="${not #lists.isEmpty(section.fileNames) and section.type == '사진 첨부'}">
          <div class="image-preview" th:each="img : ${section.fileNames}">
            <img th:src="@{'/uploads/' + ${img}}" alt="첨부 이미지">
          </div>
        </div>

        <!-- 파일 첨부 -->
        <div th:if="${not #lists.isEmpty(section.fileNames) and section.type == '파일 첨부'}" class="attachments">
          <div class="file-download" th:each="file : ${section.fileNames}">
            <a th:href="@{'/uploads/' + ${file}}" download>📄 <span th:text="${file}">파일명</span> 다운로드</a>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

<script src="/js/showresume.js"></script>
</body>
</html>
